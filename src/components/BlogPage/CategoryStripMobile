import React, { useRef, useEffect } from 'react';

const CategoryStripMobile = ({ categories, selectedCategory, setSelectedCategory }) => {
    const scrollRef = useRef(null);
    const allCategories = ['All', ...categories.map(cat => cat.name)];

    // Auto-scroll to selected category
    useEffect(() => {
        if (scrollRef.current) {
            const selectedBtn = scrollRef.current.querySelector('[data-selected="true"]');
            if (selectedBtn) {
                selectedBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }
        }
    }, [selectedCategory]);

    return (
        <div className="sticky top-14 z-30 bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm">
            <div 
                ref={scrollRef}
                className="flex items-center overflow-x-auto no-scrollbar py-0 px-2 gap-1 h-12"
            >
                {allCategories.map((cat) => {
                    const isActive = selectedCategory === cat;
                    return (
                        <button
                            key={cat}
                            data-selected={isActive}
                            onClick={() => {
                                setSelectedCategory(cat);
                                window.scrollTo({ top: 0, behavior: 'smooth' });
                            }}
                            className={`
                                flex-shrink-0 px-4 h-full flex items-center justify-center text-[13px] font-medium transition-all duration-200 whitespace-nowrap border-b-[3px]
                                ${isActive 
                                    ? 'border-sky-600 text-sky-700 font-bold' 
                                    : 'border-transparent text-gray-500 hover:text-gray-800'
                                }
                            `}
                        >
                            {cat}
                        </button>
                    );
                })}
            </div>
        </div>
    );
};

export default CategoryStripMobile;